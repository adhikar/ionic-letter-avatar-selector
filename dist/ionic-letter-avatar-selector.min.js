!function(e){e.module("ionicLetterAvatarSelector.constants",[]).constant("IONIC_LETTER_AVATAR_SELECTOR_ICONS",{"delete":ionic.Platform.isAndroid()?"ion-android-delete":"ion-ios-trash",finish:ionic.Platform.isAndroid()?"ion-android-arrow-back":"ion-ios-checkmark-empty"}).constant("IONIC_LETTER_AVATAR_SELECTOR_THEMES",{light:"#fff",stable:"#f8f8f8",positive:"#387ef5",calm:"#11c1f3",balanced:"#33cd5f",energized:"#ffc900",assertive:"#ef473a",royal:"#886aea",dark:"#444"}),e.module("ionicLetterAvatarSelector.values",[]).value("ionicLetterAvatarSelector",{header:void 0,selectionView:void 0}),e.module("ionicLetterAvatarSelector.decorators",[]).decorator("ionViewDirective",["$delegate","$document","$ionicHistory","$ionicLetterAvatarSelector","$ionicLetterAvatarSelectorConfig","$ionicNavBarDelegate","$state","ionicLetterAvatarSelector",function(t,n,i,o,r,a,c,s){var l=t[0];return l.compile=function(t){return t.addClass("pane"),t[0].removeAttribute("title"),function(t,l,d,f){function u(e,t){for(var n in A){var i=A[n];i.style&&(i.style.background=e,i.style.border=t)}}function v(){a.title(h),u(s.header.background,s.header.border),r.isAndroid&&m.css("margin-left","10px")}function g(){h||(h=i.currentTitle()),a.title(o.count()),u(r.selectionColor,"none"),r.isAndroid&&m.css("margin-left","30px")}f.init();var h,A=n[0].body.querySelectorAll(".bar-header"),m=e.element(n[0].body.querySelectorAll(".title"));s.header||(s.header={background:A[0].style.background,border:A[0].style.border}),s.selectionView||(s.selectionView=c.current.name),t.$on(o.finished,v),t.$on(o.started,g),r.finishOnStateChange?t.$on("$stateChangeStart",o.finish):(t.$on("$stateChangeStart",function(e,n,i,r){o.active()&&r.name===s.selectionView&&(v(),t.$root.$broadcast(o.viewChanged,!0))}),t.$on("$ionicView.beforeEnter",function(e,n){o.active()&&n.stateName===s.selectionView&&(g(),t.$root.$broadcast(o.viewChanged,!1))}),t.$on("$ionicView.afterEnter",function(e,n){o.active()&&n.stateName===s.selectionView&&(t.$root.$broadcast(o.viewChanged,!1),setTimeout(function(){a.title(o.count())},10))}))}},t}]).decorator("ionItemDirective",["$delegate","$ionicGesture","$ionicLetterAvatarSelector","$ionicLetterAvatarSelectorConfig","$ionicNavBarDelegate","IONIC_LETTER_AVATAR_SELECTOR_THEMES",function(t,n,i,o,r,a){var c=t[0];return c.compile=function(t,c){var s=e.isDefined(c.href)||e.isDefined(c.ngHref)||e.isDefined(c.uiSref),l=s||/ion-(delete|option|reorder)-button/i.test(t.html()),d=e.element(s?"<a></a>":"<div></div>"),f=e.isDefined(c.lettersOf),u=(o.isIos||o.isAndroid)&&e.isDefined(c.item);if(l||f){if(d.addClass("item-content"),(e.isDefined(c.href)||e.isDefined(c.ngHref))&&(d.attr("ng-href","{{$href()}}"),e.isDefined(c.target)&&d.attr("target","{{$target()}}")),d.append(t.contents()),t.addClass("item item-complex").append(d),l&&t.addClass("item-icon-right"),f){t.addClass("item-avatar-left");var v='<img id="img" ng-src="{{src}}" class="ionic-letter-avatar-selector-animate-img"/>';u&&(v+='ng-click="select($event)"'),d.prepend(v)}}else t.addClass("item");return function(t,c,s){function l(e){e||(e=s.border||o.border),L.css("border",e)}function d(){for(var e="0123456789ABCDEF".split(""),t="#",n=0;6>n;n++)t+=e[Math.floor(16*Math.random())];return t}function v(e){t.$apply(function(){t.select(e)})}function g(){c.addClass("active"),L.addClass("ng-hide-add"),t.src=b,l("none")}function h(){c.removeClass("active"),L.removeClass("ng-hide-add"),t.src=p,l()}function A(e){if(u){e.preventDefault(),e.stopPropagation(),S=i.select(s.item),S?g():h();var t=i.count();t>0&&r.title(t)}}function m(t,n,i,r,c){var s;if(t)s="âœ“",r=o.selectionColor,i||(i=1);else{if(i||(i=o.letterNumber),i)s=n.substr(0,i).toUpperCase();else{var l=n.split(" ");i=l.length,i>2&&(i=2),s="";for(var f=0;f<l.length;f++){var u=l[f];u.match(/\w/g)&&s.length<2&&(s+=u.substr(0,1).toUpperCase())}}"random"===r?r=d():r||(r=o.background),a[r]&&(r=a[r])}c||(c=o.color),a[c]&&(c=a[c]);var v=30,g=e.element("<text></text>").attr({"text-anchor":"middle",y:"50%",x:"50%",dy:"0.35em","pointer-events":"auto",fill:c,"font-family":"HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica, Arial,Lucida Grande, sans-serif"}).html(s).css({"font-weight":400,"font-size":v-5*(i-1)+"px"}),h=e.element("<svg></svg>").attr({xmlns:"http://www.w3.org/2000/svg","pointer-events":"none",width:50,height:50}).css({width:"50px",height:"50px",background:r});h.append(g);var A=e.element("<div>").append(h.clone()).html();return"data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(A)))}t.$href=function(){return s.href||s.ngHref},t.$target=function(){return s.target};var $=c[0].querySelector(".item-content");if($&&t.$on("$collectionRepeatLeave",function(){$&&$.$$ionicOptionsOpen&&($.style[ionic.CSS.TRANSFORM]="",$.style[ionic.CSS.TRANSITION]="none",$$rAF(function(){$.style[ionic.CSS.TRANSITION]=""}),$.$$ionicOptionsOpen=!1)}),f){var S,C=n.on("hold",v,c),p=m(!1,s.lettersOf,s.letterNumber,s.background,s.color),b=u?m(!0):null,L=e.element(c[0].querySelector("#img"));l(),t.src=p,t.select=A,t.$on("$destroy",function(){n.off(C,"hold",v)}),t.$on(i.finished,function(){S&&h()})}}},t}]),e.module("ionicLetterAvatarSelector.providers",[]).provider("$ionicLetterAvatarSelectorConfig",function(){var e,t="#387ef5",n="none",i="light",o=!1,r=ionic.Platform.isAndroid(),a="#A8A8A8",c=!1;return{setBackground:function(e){t=e},setBorder:function(e){n=e},setColor:function(e){i=e},setFinishOnStateChange:function(e){o=e},setLetterNumber:function(t){e=t},setSelectionAndroid:function(e){r=e},setSelectionColor:function(e){a=e},setSelectionIos:function(e){c=e},$get:function(){return{background:t,border:n,color:i,finishOnStateChange:o,isAndroid:r,isIos:c,letterNumber:e,selectionColor:a}}}}),e.module("ionicLetterAvatarSelector.directives",[]).directive("ilasButtonDelete",["$ionicLetterAvatarSelector","$ionicLetterAvatarSelectorConfig","IONIC_LETTER_AVATAR_SELECTOR_ICONS",function(e,t,n){return{restrict:"E",replace:!0,template:'<button class="button button-icon {{icon}}"ng-class="{\'ionic-letter-avatar-selector-icon-smaller\': isAndroid}"ng-show="selectionActive && !viewChanged"</button>',link:function(i){i.isAndroid=t.isAndroid,i.icon=n.delete,i.$on(e.stateChanged,function(e,t){i.selectionActive=t}),i.$on(e.viewChanged,function(t,n){i.viewChanged=n,i.selectionActive=e.active()})}}}]).directive("ilasButtonFinish",["$ionicLetterAvatarSelector","$ionicLetterAvatarSelectorConfig","IONIC_LETTER_AVATAR_SELECTOR_ICONS",function(e,t,n){return{restrict:"E",replace:!0,template:'<button class="button button-icon {{icon}}"ng-class="{\'ionic-letter-avatar-selector-icon-smaller\': isAndroid}"ng-show="selectionActive && !viewChanged"ng-click="finish()"></button>',link:function(i){i.finish=e.finish,i.isAndroid=t.isAndroid,i.icon=n.finish,i.$on(e.stateChanged,function(e,t){i.selectionActive=t}),i.$on(e.viewChanged,function(t,n){i.viewChanged=n,i.selectionActive=e.active()})}}}]),e.module("ionicLetterAvatarSelector.services",[]).factory("$ionicLetterAvatarSelector",["$rootScope",function(t){var n=this,i=[],o=!1;return n.started="ionicLetterAvatarSelector.started",n.finished="ionicLetterAvatarSelector.finished",n.stateChanged="ionicLetterAvatarSelector.stateChanged",n.active=function(){return i.length>0},n.finish=function(){i.length>0&&(i=[]),t.$broadcast(n.finished),t.$broadcast(n.stateChanged,!1)},n.count=function(){return i.length},n.getData=function(){return i.forEach(function(t,n){i[n]=JSON.parse(t,function(t,n){return e.isString(n)&&/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*))(?:Z|(\+|-)([\d|:]*))?$/.exec(n)?new Date(n):n})}),i},n.select=function(e){var r=i.length,a=i.indexOf(e);-1===a?i.push(e):i.splice(a,1);var c=i.length;return o=0===r&&1===c,o&&(t.$broadcast(n.started),t.$broadcast(n.stateChanged,!0)),n.active()||(t.$broadcast(n.finished),t.$broadcast(n.stateChanged,!1)),-1!==i.indexOf(e)},n}]),e.module("ionicLetterAvatarSelector",["ionicLetterAvatarSelector.constants","ionicLetterAvatarSelector.decorators","ionicLetterAvatarSelector.directives","ionicLetterAvatarSelector.providers","ionicLetterAvatarSelector.services","ionicLetterAvatarSelector.values"])}(angular);